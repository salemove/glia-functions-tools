---
fetch_transfer_summary:
  summary: Fetch transfer summary
  tags:
    - Transfer
  # yamllint disable rule:line-length
  description: |
    Fetches a transfer summary using Cortex AI.

    Transfer summary is generated based on the content of the previous engagement conversation and shown in the transfer modal. Transferring operator can change the summary, if necessary.

    Once the receiving operator has accepted the transfer, the summary becomes part of the next engagement leg and will be visible in that leg's transcript.


    Note that only one transfer summary can be created for each engagement leg. Meaning that if the transfer is canceled or fails for some reason, the next transfer attempt will not have the Cortex summary in it.


    ### Authorization and Permissions

    [User's bearer access token](https://docs.glia.com/glia-dev/reference/post_operator-authentication-tokens), requires:
    * The user was part of the engagement.
    * Base of the user's role, one of:
      * `operator`
      * `manager`
      * `super_manager`

    For more information about bearer access tokens, see [Authorization Header](https://docs.glia.com/glia-dev/reference/authorization-header).

    > ⚠️
    >
    > Cortex Transfer Summary requires a separate license, please contact your Glia representative for more information.
  # yamllint enable rule:line-length
  parameters:
    - $ref: '../../src/parameters/transfer_summary.yaml#/engagement_id'
    - $ref: '../../src/parameters/transfer_summary.yaml#/sub_engagement_id'

  responses:
    '200':
      description: The transfer summary generated by Cortex AI is fetched.
      content:
        application/vnd.salemove.v1+json:
          schema:
            oneOf:
              - $ref: '../schemas/transfer_summary_response.yaml#/getTransferSummarySuccessResponse'
              - $ref: '../schemas/transfer_summary_response.yaml#/getTransferSummaryFailureResponse'
          examples:
            $ref: '../schemas/transfer_summary_response.yaml#/getTransferSummaryResponseExample'
    '401':
      $ref: '../../../common_components/responses/errors.yaml#/401_unauthorized'
    '403':
      $ref: '../../../common_components/responses/errors.yaml#/403_forbidden'
    '500':
      $ref: '../../../common_components/responses/errors.yaml#/500_internal_server_error'
    '503':
      $ref: '../../../common_components/responses/errors.yaml#/503_service_unavailable'
